# Redis

非常に高速なインメモリデータベース。

## Redisがなぜ高速か

主に以下の３点による

- 全てのデータはディスクではなく、メモリ上に搭載される
- シンプルなデータ構造のみをサポートしている
- パフォーマンスが犠牲になるような機能追加は行わない

ただしこれらは以下を示していることに注意する。

- 全てのデータはディスクではなく、メモリ上に搭載される
  - データを限られたスペースに適合させる必要がある
- シンプルなデータ構造のみをサポートしている
  - データをシンプルな構造に変換する必要がある
- パフォーマンスが犠牲になるような機能追加は行わない
  - 限られた機能セット内で使用する必要がある

## 基本動作

基本的には`SET`コマンドを使用して、`GET`コマンドにて値を取得する。

以下の場合、messageはkey, 'Hi there'はvalueとして格納される。

```shell
SET message 'Hi there!'
```

以下のようにkeyを設定して取得すると対応するvalueである'Hi there'が取得できる。

```shell
GET message
```

## 注意するコマンド

`GETEX`コマンドは通常の`GET`と同様に値を取得できるが  
取得と共に取得したデータの生存時間を決めることができる。

例えば以下のように値を取得したとすると取得後、該当データの生存時間は10秒となる。  
（つまり`GETEX`コマンドを実行した10秒後にkey=messageのデータは消滅する）

```shell
SET message 'Hi there!'
GETEX message EX 10
```

ちなみにGET後に値を即時削除したい（Queueのようなイメージで使いたい）場合は  
`GETDEL`コマンドを使用する。

## SETコマンド系のオプション

`SET`コマンドでもオプション指定によって以下が可能となる

- データの生存時間を指定することが可能（EXなど）
- 対象のkeyが存在しない場合のみ値を格納する（NX）
- 対象のkeyが存在する場合のみ値を上書きする（XX）
- 値を新規に設定した場合、以前に格納されていた値を取得（GET）

以下は結果として以前に格納されていた値の'red'が取得される。

```shell
SET color 'red'
SET color 'green' GET
```
